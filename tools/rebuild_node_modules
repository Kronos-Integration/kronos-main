#!/usr/bin/env bash

#git submodule update --remote --merge

for i in $(git submodule foreach --quiet 'echo $path')
do
  (cd $i
  git checkout master
  git pull
  )
done

for i in $(git submodule foreach --quiet 'echo $path')
do
  (cd $i
  echo $i
  git branch
  git status
  )
done

for i in $(git submodule foreach --quiet 'echo $path')
do
  echo "Adding $i to root repo"
  git add "$i"
done

git commit -m 'chore(submodule): branch of deployment repo to point to latest head of submodules'

exit

for i in $(git submodule foreach --quiet 'echo $path')
do
  (
  cd $i
  rm -rf node_modules
  npm install
  )
done
