#!/usr/bin/env bash

git submodule update --remote --merge
git submodule foreach git pull origin master

for i in $(git submodule foreach --quiet 'echo $path')
do
  echo "Adding $i to root repo"
  git add "$i"
done

git commit -m 'chore(submodule): branch of deployment repo to point to latest head of submodules'

for i in $(git submodule foreach --quiet 'echo $path')
do
  (
  cd $path
  rm -rf node_modules
  npm install
  )
done
