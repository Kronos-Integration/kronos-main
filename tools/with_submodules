#!/usr/bin/env bash


for i in $(git submodule foreach --quiet 'echo $path')
do
  (cd $i
  )
done

exit
---
grep '"semantic-release": "6.2.1"' package.json >/dev/null
if [ $? -eq 1 ]; then
  echo $i
  grep '"semantic-release": "6.' package.json >/dev/null
  if [ $? -eq 0 ]; then
    npm install --save-dev --save-exact semantic-release@6.2.1
    git add package.json
    git commit -m 'chore(dependency): semantic-release@6.2.1'
    git push
  else
    echo "*** check $i"
  fi
fi
---
sed -i '' 's/  - 4.2/  - 5/' .travis.yml
git add .travis.yml
git commit -m 'chore(travis): build with node 5'
git push
---
perl -i -pe 's/^\[\!\[Coverage\s+Status.*\n$//' README.md
git add README.md
git commit -m 'doc(readme): remove coveralls'
---
perl -i -pe 's/^.*coveralls.js\n$//' .travis.yml
git add .travis.yml
git commit -m 'chore(travis): remove coveralls'
---
